<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament Sepak Bola - Custom</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .tournament-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .tournament-section:hover {
            transform: translateY(-5px);
        }

        .section-title {
            font-size: 2em;
            margin-bottom: 25px;
            color: #4a5568;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        /* Tournament Setup Styles */
        .setup-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .setup-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 12px;
            padding: 25px;
            border: 2px solid #e2e8f0;
        }

        .setup-card h3 {
            color: #667eea;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }

        .input-group label {
            font-weight: bold;
            color: #4a5568;
        }

        .setup-input {
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1.1em;
            transition: all 0.3s ease;
            background: white;
        }

        .setup-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .team-inputs {
            display: grid;
            gap: 10px;
            margin-top: 15px;
        }

        .team-input {
            padding: 10px 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-weight: bold;
            background: white;
            transition: all 0.3s ease;
        }

        .team-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        .generate-btn {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
            width: 100%;
            margin-top: 20px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(72, 187, 120, 0.4);
        }

        /* Group Display Styles */
        .groups-container {
            display: grid;
            gap: 30px;
            margin-bottom: 30px;
        }

        .group {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 12px;
            padding: 25px;
            border-left: 5px solid #667eea;
        }

        .group-title {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
        }

        .matches-grid {
            display: grid;
            gap: 15px;
            margin-bottom: 20px;
        }

        .match {
            background: white;
            border-radius: 10px;
            padding: 15px;
            border: 1px solid #e2e8f0;
            transition: all 0.3s ease;
        }

        .match:hover {
            transform: scale(1.02);
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .match-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .team {
            flex: 1;
            text-align: center;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 6px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .team:hover {
            background: #667eea;
            color: white;
        }

        .vs {
            font-size: 1.2em;
            font-weight: bold;
            color: #667eea;
        }

        .score-input {
            width: 50px;
            height: 35px;
            text-align: center;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1.1em;
            font-weight: bold;
            margin: 0 5px;
            transition: border-color 0.3s ease;
        }

        .score-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 2px rgba(102, 126, 234, 0.1);
        }

        /* Table Styles */
        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            margin-top: 20px;
        }

        .league-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        .league-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 8px;
            text-align: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .league-table td {
            padding: 10px 8px;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
            font-size: 0.9em;
        }

        .league-table tr:hover td {
            background-color: #f7fafc;
        }

        .league-table tr:nth-child(even) td {
            background-color: #f8f9fa;
        }

        .team-name {
            font-weight: bold;
            text-align: left;
            color: #4a5568;
        }

        .qualification {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white !important;
        }

        /* Knockout Styles */
        .knockout-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .knockout-round {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid #e2e8f0;
        }

        .round-title {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }

        .knockout-matches {
            display: grid;
            gap: 15px;
        }

        .knockout-match {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .knockout-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .knockout-team {
            font-weight: bold;
            padding: 8px 12px;
            background: #f7fafc;
            border-radius: 6px;
            min-width: 100px;
            text-align: center;
        }

        .winner {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
        }

        .hidden {
            display: none;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: #48bb78;
            color: white;
        }

        .notification.error {
            background: #f56565;
            color: white;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .setup-grid {
                grid-template-columns: 1fr;
            }
            
            .match-teams {
                flex-direction: column;
                gap: 10px;
            }
            
            .vs {
                order: 2;
            }

            .knockout-teams {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ TOURNAMENT CREATOR</h1>
            <p>Buat Tournament Custom dengan Tim & Grup Fleksibel</p>
        </div>

        <!-- Tournament Setup -->
        <div class="tournament-section">
            <h2 class="section-title">‚öôÔ∏è Setup Tournament</h2>
            <div class="setup-grid">
                <div class="setup-card">
                    <h3>üéØ Format Tournament</h3>
                    <div class="input-group">
                        <label>Jumlah Tim:</label>
                        <input type="number" id="totalTeams" class="setup-input" value="4" min="3" max="16" onchange="updateTeamInputs()">
                    </div>
                    <div class="input-group">
                        <label>Jumlah Grup:</label>
                        <input type="number" id="totalGroups" class="setup-input" value="1" min="1" max="4" onchange="validateGroups()">
                    </div>
                    <div class="input-group">
                        <label>Format Knockout:</label>
                        <select id="knockoutFormat" class="setup-input">
                            <option value="top2">Top 2 dari Setiap Grup</option>
                            <option value="top1">Top 1 dari Setiap Grup</option>
                            <option value="top4">Top 4 Overall</option>
                        </select>
                    </div>
                </div>

                <div class="setup-card">
                    <h3>‚öΩ Nama Tim</h3>
                    <div id="teamInputsContainer" class="team-inputs">
                        <!-- Team inputs will be generated here -->
                    </div>
                </div>
            </div>
            
            <div style="text-align: center;">
                <button class="generate-btn" onclick="generateTournament()">üöÄ Generate Tournament</button>
            </div>
        </div>

        <!-- Groups Section -->
        <div id="groupsSection" class="tournament-section hidden">
            <h2 class="section-title">üìã Fase Grup</h2>
            <div id="groupsContainer"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="calculateAllTables()">üîÑ Hitung Semua Klasemen</button>
            </div>
        </div>

        <!-- Knockout Section -->
        <div id="knockoutSection" class="tournament-section hidden">
            <h2 class="section-title">üèÜ Fase Knockout</h2>
            <div id="knockoutContainer"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="calculate-btn" onclick="updateKnockout()">‚öΩ Update Knockout</button>
            </div>
        </div>
    </div>

    <script>
        let tournamentConfig = {
            totalTeams: 4,
            totalGroups: 1,
            knockoutFormat: 'top2',
            teams: [],
            groups: [],
            standings: {}
        };

        function updateTeamInputs() {
            const totalTeams = parseInt(document.getElementById('totalTeams').value);
            const container = document.getElementById('teamInputsContainer');
            
            container.innerHTML = '';
            
            for (let i = 1; i <= totalTeams; i++) {
                const input = document.createElement('input');
                input.type = 'text';
                input.className = 'team-input';
                input.id = `team${i}`;
                input.placeholder = `Tim ${i}`;
                input.value = `Tim ${i}`;
                container.appendChild(input);
            }
            
            validateGroups();
        }

        function validateGroups() {
            const totalTeams = parseInt(document.getElementById('totalTeams').value);
            const totalGroups = parseInt(document.getElementById('totalGroups').value);
            const groupsInput = document.getElementById('totalGroups');
            
            if (totalGroups > totalTeams) {
                groupsInput.value = totalTeams;
                showNotification('Jumlah grup tidak boleh lebih dari jumlah tim!', 'error');
            }
            
            if (totalTeams / totalGroups < 2) {
                showNotification('Setiap grup minimal harus ada 2 tim!', 'error');
            }
        }

        function generateTournament() {
            // Get configuration
            tournamentConfig.totalTeams = parseInt(document.getElementById('totalTeams').value);
            tournamentConfig.totalGroups = parseInt(document.getElementById('totalGroups').value);
            tournamentConfig.knockoutFormat = document.getElementById('knockoutFormat').value;
            
            // Get team names
            tournamentConfig.teams = [];
            for (let i = 1; i <= tournamentConfig.totalTeams; i++) {
                const teamName = document.getElementById(`team${i}`).value || `Tim ${i}`;
                tournamentConfig.teams.push(teamName);
            }
            
            // Validate
            if (tournamentConfig.totalTeams < 3) {
                showNotification('Minimal 3 tim untuk tournament!', 'error');
                return;
            }
            
            if (Math.floor(tournamentConfig.totalTeams / tournamentConfig.totalGroups) < 2) {
                showNotification('Setiap grup minimal harus ada 2 tim!', 'error');
                return;
            }
            
            // Generate groups
            generateGroups();
            generateMatches();
            generateKnockoutStructure();
            
            // Show sections
            document.getElementById('groupsSection').classList.remove('hidden');
            document.getElementById('knockoutSection').classList.remove('hidden');
            
            showNotification('Tournament berhasil di-generate!', 'success');
        }

        function generateGroups() {
            tournamentConfig.groups = [];
            const teamsPerGroup = Math.floor(tournamentConfig.totalTeams / tournamentConfig.totalGroups);
            const extraTeams = tournamentConfig.totalTeams % tournamentConfig.totalGroups;
            
            let teamIndex = 0;
            
            for (let g = 0; g < tournamentConfig.totalGroups; g++) {
                const groupSize = teamsPerGroup + (g < extraTeams ? 1 : 0);
                const groupTeams = [];
                
                for (let t = 0; t < groupSize; t++) {
                    groupTeams.push(tournamentConfig.teams[teamIndex]);
                    teamIndex++;
                }
                
                tournamentConfig.groups.push({
                    name: `Grup ${String.fromCharCode(65 + g)}`,
                    teams: groupTeams,
                    matches: []
                });
            }
        }

        function generateMatches() {
            const container = document.getElementById('groupsContainer');
            container.innerHTML = '';
            
            tournamentConfig.groups.forEach((group, groupIndex) => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'group';
                
                // Group title
                const title = document.createElement('div');
                title.className = 'group-title';
                title.textContent = group.name;
                groupDiv.appendChild(title);
                
                // Generate matches for this group
                const matches = [];
                for (let i = 0; i < group.teams.length; i++) {
                    for (let j = i + 1; j < group.teams.length; j++) {
                        matches.push({
                            team1: group.teams[i],
                            team2: group.teams[j],
                            id: `g${groupIndex}m${matches.length}`
                        });
                    }
                }
                
                group.matches = matches;
                
                // Create matches HTML
                const matchesDiv = document.createElement('div');
                matchesDiv.className = 'matches-grid';
                
                matches.forEach((match, matchIndex) => {
                    const matchDiv = document.createElement('div');
                    matchDiv.className = 'match';
                    matchDiv.innerHTML = `
                        <div class="match-teams">
                            <div class="team">${match.team1}</div>
                            <div>
                                <div class="vs">VS</div>
                                <input type="number" class="score-input" id="${match.id}-1" min="0" placeholder="0">
                                <span>-</span>
                                <input type="number" class="score-input" id="${match.id}-2" min="0" placeholder="0">
                            </div>
                            <div class="team">${match.team2}</div>
                        </div>
                    `;
                    matchesDiv.appendChild(matchDiv);
                });
                
                groupDiv.appendChild(matchesDiv);
                
                // Create table
                const tableContainer = document.createElement('div');
                tableContainer.className = 'table-container';
                tableContainer.innerHTML = `
                    <table class="league-table">
                        <thead>
                            <tr>
                                <th>Pos</th>
                                <th>Tim</th>
                                <th>Main</th>
                                <th>Menang</th>
                                <th>Seri</th>
                                <th>Kalah</th>
                                <th>Gol+</th>
                                <th>Gol-</th>
                                <th>Selisih</th>
                                <th>Poin</th>
                            </tr>
                        </thead>
                        <tbody id="table-g${groupIndex}">
                            ${group.teams.map((team, index) => `
                                <tr>
                                    <td>${index + 1}</td>
                                    <td class="team-name">${team}</td>
                                    <td>0</td><td>0</td><td>0</td><td>0</td>
                                    <td>0</td><td>0</td><td>0</td><td>0</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
                
                groupDiv.appendChild(tableContainer);
                container.appendChild(groupDiv);
            });
        }

        function calculateAllTables() {
            tournamentConfig.standings = {};
            
            tournamentConfig.groups.forEach((group, groupIndex) => {
                // Initialize standings for this group
                const groupStandings = {};
                group.teams.forEach(team => {
                    groupStandings[team] = {
                        matches: 0, wins: 0, draws: 0, losses: 0,
                        goalsFor: 0, goalsAgainst: 0, goalDifference: 0, points: 0
                    };
                });
                
                // Calculate matches
                group.matches.forEach(match => {
                    const score1 = parseInt(document.getElementById(`${match.id}-1`).value) || 0;
                    const score2 = parseInt(document.getElementById(`${match.id}-2`).value) || 0;
                    
                    // Update stats
                    groupStandings[match.team1].matches++;
                    groupStandings[match.team2].matches++;
                    groupStandings[match.team1].goalsFor += score1;
                    groupStandings[match.team1].goalsAgainst += score2;
                    groupStandings[match.team2].goalsFor += score2;
                    groupStandings[match.team2].goalsAgainst += score1;
                    
                    if (score1 > score2) {
                        groupStandings[match.team1].wins++;
                        groupStandings[match.team1].points += 3;
                        groupStandings[match.team2].losses++;
                    } else if (score1 < score2) {
                        groupStandings[match.team2].wins++;
                        groupStandings[match.team2].points += 3;
                        groupStandings[match.team1].losses++;
                    } else {
                        groupStandings[match.team1].draws++;
                        groupStandings[match.team2].draws++;
                        groupStandings[match.team1].points += 1;
                        groupStandings[match.team2].points += 1;
                    }
                });
                
                // Calculate goal difference
                group.teams.forEach(team => {
                    groupStandings[team].goalDifference = groupStandings[team].goalsFor - groupStandings[team].goalsAgainst;
                });
                
                // Sort teams
                const sortedTeams = group.teams.sort((a, b) => {
                    if (groupStandings[b].points !== groupStandings[a].points) {
                        return groupStandings[b].points - groupStandings[a].points;
                    }
                    if (groupStandings[b].goalDifference !== groupStandings[a].goalDifference) {
                        return groupStandings[b].goalDifference - groupStandings[a].goalDifference;
                    }
                    return groupStandings[b].goalsFor - groupStandings[a].goalsFor;
                });
                
                // Update table
                const tableBody = document.getElementById(`table-g${groupIndex}`);
                tableBody.innerHTML = '';
                
                sortedTeams.forEach((team, index) => {
                    const stats = groupStandings[team];
                    const row = document.createElement('tr');
                    
                    // Highlight qualification spots
                    const qualifySpots = getQualificationSpots();
                    if (index < qualifySpots) {
                        row.classList.add('qualification');
                    }
                    
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td class="team-name">${team}</td>
                        <td>${stats.matches}</td>
                        <td>${stats.wins}</td>
                        <td>${stats.draws}</td>
                        <td>${stats.losses}</td>
                        <td>${stats.goalsFor}</td>
                        <td>${stats.goalsAgainst}</td>
                        <td>${stats.goalDifference > 0 ? '+' : ''}${stats.goalDifference}</td>
                        <td><strong>${stats.points}</strong></td>
                    `;
                    
                    tableBody.appendChild(row);
                });
                
                tournamentConfig.standings[`group${groupIndex}`] = {
                    standings: groupStandings,
                    sorted: sortedTeams
                };
            });
            
            updateKnockoutTeams();
        }

        function getQualificationSpots() {
            switch (tournamentConfig.knockoutFormat) {
                case 'top1': return 1;
                case 'top2': return 2;
                case 'top4': return Math.min(4, Math.floor(tournamentConfig.totalTeams / tournamentConfig.totalGroups));
                default: return 2;
            }
        }

        function generateKnockoutStructure() {
            const container = document.getElementById('knockoutContainer');
            container.innerHTML = '';
            
            const qualifiedTeams = getQualifiedTeams();
            
            if (qualifiedTeams.length < 2) {
                container.innerHTML = '<p>Tidak cukup tim untuk fase knockout. Minimal 2 tim diperlukan.</p>';
                return;
            }
            
            // Generate knockout matches based on number of qualified teams
            if (qualifiedTeams.length === 2) {
                generateFinalOnly(container, qualifiedTeams);
            } else if (qualifiedTeams.length <= 4) {
                generateSemiAndFinal(container, qualifiedTeams);
            } else {
                generateFullKnockout(container, qualifiedTeams);
            }
        }

        function getQualifiedTeams() {
            const qualified = [];
            const qualifySpots = getQualificationSpots();
            
            if (tournamentConfig.knockoutFormat === 'top4') {
                // Get top 4 overall
                const allTeams = [];
                Object.values(tournamentConfig.standings).forEach(group => {
                    group.sorted.forEach(team => {
                        allTeams.push({
                            team: team,
                            stats: group.standings[team]
                        });
                    });
                });
                
                allTeams.sort((a, b) => {
                    if (b.stats.points !== a.stats.points) {
                        return b.stats.points - a.stats.points;
                    }
                    if (b.stats.goalDifference !== a.stats.goalDifference) {
                        return b.stats.goalDifference - a.stats.goalDifference;
                    }
                    return b.stats.goalsFor - a.stats.goalsFor;
                });
                
                return allTeams.slice(0, 4).map(item => item.team);
            } else {
                // Get top teams from each group
                Object.values(tournamentConfig.standings).forEach(group => {
                    qualified.push(...group.sorted.slice(0, qualifySpots));
                });
            }
            
            return qualified;
        }

        function generateFinalOnly(container, teams) {
            const finalDiv = document.createElement('div');
            finalDiv.className = 'knockout-round';
            finalDiv.innerHTML = `
                <div class="round-title">üèÜ FINAL</div>
                <div class="knockout-matches">
                    <div class="knockout-match">
                        <div class="knockout-teams">
                            <div class="knockout-team" id="final-team1">${teams[0] || 'TBD'}</div>
                            <div class="knockout-team" id="final-team2">${teams[1] || 'TBD'}</div>
                        </div>
                        <div style="text-align: center;">
                            <input type="number" class="score-input" id="final-score1" min="0" placeholder="0">
                            <span> - </span>
                            <input type="number" class="score-input" id="final-score2" min="0" placeholder="0">
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(finalDiv);
        }

        function generateSemiAndFinal(container, teams) {
            // Semifinal
            const semiDiv = document.createElement('div');
            semiDiv.className = 'knockout-round';
            semiDiv.innerHTML = `
                <div class="round-title">ü•á SEMIFINAL</div>
                <div class="knockout-matches">
                    <div class="knockout-match">
                        <div class="knockout-teams">
                            <div class="knockout-team" id="sf1-team1">${teams[0] || 'TBD'}</div>
                            <div class="knockout-team" id="sf1-team2">${teams[3] || teams[1] || 'TBD'}</div>
                        </div>
                        <div style="text-align: center;">
                            <input type="number" class="score-input" id="sf1-score1" min="0" placeholder="0">
                            <span> - </span>
                            <input type="number" class="score-input" id="sf1-score2" min="0" placeholder="0">
                        </div>
                    </div>
                    <div class="knockout-match">
                        <div class="knockout-teams">
                            <div class="knockout-team" id="sf2-team1">${teams[1] || 'TBD'}</div>
                            <div class="knockout-team" id="sf2-team2">${teams[2] || 'TBD'}</div>
                        </div>
                        <div style="text-align: center;">
                            <input type="number" class="score-input" id="sf2-score1" min="0" placeholder="0">
                            <span> - </span>
                            <input type="number" class="score-input" id="sf2-score2" min="0" placeholder="0">
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(semiDiv);

            // Third Place
            if (teams.length >= 4) {
                const thirdDiv = document.createElement('div');
                thirdDiv.className = 'knockout-round';
                thirdDiv.innerHTML = `
                    <div class="round-title">ü•â PEREBUTAN TEMPAT KE-3</div>
                    <div class="knockout-matches">
                        <div class="knockout-match">
                            <div class="knockout-teams">
                                <div class="knockout-team" id="third-team1">Kalah SF1</div>
                                <div class="knockout-team" id="third-team2">Kalah SF2</div>
                            </div>
                            <div style="text-align: center;">
                                <input type="number" class="score-input" id="third-score1" min="0" placeholder="0">
                                <span> - </span>
                                <input type="number" class="score-input" id="third-score2" min="0" placeholder="0">
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(thirdDiv);
            }

            // Final
            const finalDiv = document.createElement('div');
            finalDiv.className = 'knockout-round';
            finalDiv.innerHTML = `
                <div class="round-title">üèÜ FINAL</div>
                <div class="knockout-matches">
                    <div class="knockout-match">
                        <div class="knockout-teams">
                            <div class="knockout-team" id="final-team1">Menang SF1</div>
                            <div class="knockout-team" id="final-team2">Menang SF2</div>
                        </div>
                        <div style="text-align: center;">
                            <input type="number" class="score-input" id="final-score1" min="0" placeholder="0">
                            <span> - </span>
                            <input type="number" class="score-input" id="final-score2" min="0" placeholder="0">
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(finalDiv);
        }

        function generateFullKnockout(container, teams) {
            // For 8+ teams, create quarterfinals too
            if (teams.length >= 8) {
                // Quarterfinals
                const quarterDiv = document.createElement('div');
                quarterDiv.className = 'knockout-round';
                let quarterMatches = '';
                
                for (let i = 0; i < Math.min(8, teams.length); i += 2) {
                    const matchNum = Math.floor(i / 2) + 1;
                    quarterMatches += `
                        <div class="knockout-match">
                            <div class="knockout-teams">
                                <div class="knockout-team" id="qf${matchNum}-team1">${teams[i] || 'TBD'}</div>
                                <div class="knockout-team" id="qf${matchNum}-team2">${teams[i + 1] || 'TBD'}</div>
                            </div>
                            <div style="text-align: center;">
                                <input type="number" class="score-input" id="qf${matchNum}-score1" min="0" placeholder="0">
                                <span> - </span>
                                <input type="number" class="score-input" id="qf${matchNum}-score2" min="0" placeholder="0">
                            </div>
                        </div>
                    `;
                }
                
                quarterDiv.innerHTML = `
                    <div class="round-title">‚öΩ QUARTERFINAL</div>
                    <div class="knockout-matches">${quarterMatches}</div>
                `;
                container.appendChild(quarterDiv);
            }

            // Generate semifinal and final
            generateSemiAndFinal(container, teams.slice(0, 4));
        }

        function updateKnockoutTeams() {
            if (!tournamentConfig.standings || Object.keys(tournamentConfig.standings).length === 0) {
                return;
            }

            const qualifiedTeams = getQualifiedTeams();
            
            // Update semifinal teams if they exist
            if (document.getElementById('sf1-team1')) {
                document.getElementById('sf1-team1').textContent = qualifiedTeams[0] || 'TBD';
                document.getElementById('sf1-team2').textContent = qualifiedTeams[3] || qualifiedTeams[1] || 'TBD';
                document.getElementById('sf2-team1').textContent = qualifiedTeams[1] || 'TBD';
                document.getElementById('sf2-team2').textContent = qualifiedTeams[2] || 'TBD';
            }

            // Update final teams if only 2 qualified
            if (qualifiedTeams.length === 2 && document.getElementById('final-team1')) {
                document.getElementById('final-team1').textContent = qualifiedTeams[0];
                document.getElementById('final-team2').textContent = qualifiedTeams[1];
            }

            // Update quarterfinal teams if they exist
            for (let i = 1; i <= 4; i++) {
                const team1El = document.getElementById(`qf${i}-team1`);
                const team2El = document.getElementById(`qf${i}-team2`);
                if (team1El && team2El) {
                    const index1 = (i - 1) * 2;
                    const index2 = (i - 1) * 2 + 1;
                    team1El.textContent = qualifiedTeams[index1] || 'TBD';
                    team2El.textContent = qualifiedTeams[index2] || 'TBD';
                }
            }
        }

        function updateKnockout() {
            // Update semifinal results
            updateSemifinalResults();
            
            // Update quarterfinal results if they exist
            updateQuarterfinalResults();
            
            // Add visual feedback for winners
            updateWinnerStyles();
        }

        function updateSemifinalResults() {
            // Semifinal 1
            const sf1Score1 = parseInt(document.getElementById('sf1-score1')?.value) || 0;
            const sf1Score2 = parseInt(document.getElementById('sf1-score2')?.value) || 0;
            const sf1Team1 = document.getElementById('sf1-team1')?.textContent;
            const sf1Team2 = document.getElementById('sf1-team2')?.textContent;

            // Semifinal 2
            const sf2Score1 = parseInt(document.getElementById('sf2-score1')?.value) || 0;
            const sf2Score2 = parseInt(document.getElementById('sf2-score2')?.value) || 0;
            const sf2Team1 = document.getElementById('sf2-team1')?.textContent;
            const sf2Team2 = document.getElementById('sf2-team2')?.textContent;

            // Update final teams
            const finalTeam1El = document.getElementById('final-team1');
            const finalTeam2El = document.getElementById('final-team2');
            const thirdTeam1El = document.getElementById('third-team1');
            const thirdTeam2El = document.getElementById('third-team2');

            if (finalTeam1El && finalTeam2El) {
                if (sf1Score1 > sf1Score2) {
                    finalTeam1El.textContent = sf1Team1;
                    if (thirdTeam1El) thirdTeam1El.textContent = sf1Team2;
                } else if (sf1Score1 < sf1Score2) {
                    finalTeam1El.textContent = sf1Team2;
                    if (thirdTeam1El) thirdTeam1El.textContent = sf1Team1;
                } else {
                    finalTeam1El.textContent = 'Menang SF1';
                }

                if (sf2Score1 > sf2Score2) {
                    finalTeam2El.textContent = sf2Team1;
                    if (thirdTeam2El) thirdTeam2El.textContent = sf2Team2;
                } else if (sf2Score1 < sf2Score2) {
                    finalTeam2El.textContent = sf2Team2;
                    if (thirdTeam2El) thirdTeam2El.textContent = sf2Team1;
                } else {
                    finalTeam2El.textContent = 'Menang SF2';
                }
            }
        }

        function updateQuarterfinalResults() {
            for (let i = 1; i <= 4; i++) {
                const score1 = parseInt(document.getElementById(`qf${i}-score1`)?.value) || 0;
                const score2 = parseInt(document.getElementById(`qf${i}-score2`)?.value) || 0;
                const team1 = document.getElementById(`qf${i}-team1`)?.textContent;
                const team2 = document.getElementById(`qf${i}-team2`)?.textContent;

                // Update semifinal teams based on quarterfinal results
                const sfMatch = Math.ceil(i / 2);
                const sfPosition = (i - 1) % 2 + 1;
                const sfTeamEl = document.getElementById(`sf${sfMatch}-team${sfPosition}`);

                if (sfTeamEl) {
                    if (score1 > score2) {
                        sfTeamEl.textContent = team1;
                    } else if (score1 < score2) {
                        sfTeamEl.textContent = team2;
                    }
                }
            }
        }

        function updateWinnerStyles() {
            // Reset all winner styles
            document.querySelectorAll('.knockout-team').forEach(team => {
                team.classList.remove('winner');
            });

            // Highlight winners based on scores
            const matches = [
                { scoreId1: 'qf1-score1', scoreId2: 'qf1-score2', teamId1: 'qf1-team1', teamId2: 'qf1-team2' },
                { scoreId1: 'qf2-score1', scoreId2: 'qf2-score2', teamId1: 'qf2-team1', teamId2: 'qf2-team2' },
                { scoreId1: 'qf3-score1', scoreId2: 'qf3-score2', teamId1: 'qf3-team1', teamId2: 'qf3-team2' },
                { scoreId1: 'qf4-score1', scoreId2: 'qf4-score2', teamId1: 'qf4-team1', teamId2: 'qf4-team2' },
                { scoreId1: 'sf1-score1', scoreId2: 'sf1-score2', teamId1: 'sf1-team1', teamId2: 'sf1-team2' },
                { scoreId1: 'sf2-score1', scoreId2: 'sf2-score2', teamId1: 'sf2-team1', teamId2: 'sf2-team2' },
                { scoreId1: 'third-score1', scoreId2: 'third-score2', teamId1: 'third-team1', teamId2: 'third-team2' },
                { scoreId1: 'final-score1', scoreId2: 'final-score2', teamId1: 'final-team1', teamId2: 'final-team2' }
            ];

            matches.forEach(match => {
                const score1El = document.getElementById(match.scoreId1);
                const score2El = document.getElementById(match.scoreId2);
                const team1El = document.getElementById(match.teamId1);
                const team2El = document.getElementById(match.teamId2);

                if (score1El && score2El && team1El && team2El) {
                    const score1 = parseInt(score1El.value) || 0;
                    const score2 = parseInt(score2El.value) || 0;

                    if (score1 > score2) {
                        team1El.classList.add('winner');
                    } else if (score1 < score2) {
                        team2El.classList.add('winner');
                    }
                }
            });
        }

        function showNotification(message, type) {
            // Remove existing notifications
            document.querySelectorAll('.notification').forEach(notif => notif.remove());

            // Create new notification
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateTeamInputs();
            
            // Add event listeners for automatic winner highlighting
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('score-input') && 
                    (e.target.id.includes('sf') || e.target.id.includes('qf') || 
                     e.target.id.includes('third') || e.target.id.includes('final'))) {
                    setTimeout(updateWinnerStyles, 100);
                }
            });
        });
    </script>
</body>
</html>